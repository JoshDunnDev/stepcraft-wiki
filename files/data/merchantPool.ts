// Merchant pool for merchant inventory management
// Each entry: { type: 'item' | 'resource', key: string, max: number }

export const alwaysAvailable = [
  // T0 Resources (always available)
  { type: 'resource', key: 'stone', max: 10 },
  { type: 'resource', key: 'sticks', max: 15 },
  { type: 'resource', key: 'fly_agaric', max: 8 },
  { type: 'resource', key: 'salmon', max: 8 },
  { type: 'resource', key: 'tilapia', max: 8 },
  { type: 'resource', key: 'bird_1_meat', max: 6 },
  { type: 'resource', key: 'wheat', max: 10 },
  { type: 'resource', key: 'carrot', max: 10 },
  { type: 'resource', key: 'egg', max: 8 },

  // T1 Resources (always available)
  { type: 'resource', key: 'copper_ore', max: 8 },
  { type: 'resource', key: 'birch_log', max: 8 },
  { type: 'resource', key: 'button_mushroom', max: 8 },
  { type: 'resource', key: 'rainbow_trout', max: 8 },
  { type: 'resource', key: 'bird_2_meat', max: 6 },
  { type: 'resource', key: 'flour', max: 8 },
  { type: 'resource', key: 'sugar', max: 8 },

  // T0 Food (always available)
  { type: 'item', key: 'fish_soup', max: 5 },
  { type: 'item', key: 'cooked_bird', max: 5 },
  { type: 'item', key: 'bread', max: 5 },

  // T1 Food (always available)
  { type: 'item', key: 'mushroom_skewer', max: 5 },
  { type: 'item', key: 'drumstick', max: 5 },

  // T0 Potions (always available)
  { type: 'item', key: 'minor_healing_potion', max: 3 },
  { type: 'item', key: 'minor_defense_potion', max: 3 },
  { type: 'item', key: 'minor_attack_potion', max: 3 },
  { type: 'item', key: 'minor_crit_chance_potion', max: 3 },
];

export const rotatingItemPool = [
  // T2+ Food
  { key: 'fried_egg', max: 4 },
  { key: 'calamari', max: 4 },
  { key: 'cooked_crab', max: 4 },
  { key: 'cooked_lobster', max: 4 },
  { key: 'cooked_shrimp', max: 4 },
  { key: 'cookie', max: 4 },
  { key: 'sashimi', max: 4 },
  { key: 'sushi', max: 4 },
  { key: 'shucked_oyster', max: 4 },
  { key: 'salmowich', max: 4 },
  { key: 'pizza_slice', max: 4 },
  { key: 'donut', max: 4 },
  { key: 'grey_fish', max: 4 },
  { key: 'blue_fish', max: 4 },
  { key: 'onion_soup', max: 4 },
  { key: 'bacon', max: 4 },
  { key: 'breakfast', max: 4 },
  { key: 'hamburger', max: 4 },
  { key: 'hot_dog', max: 4 },
  { key: 'berry_pie', max: 4 },
  { key: 'dinner', max: 4 },
  { key: 'crimson_fruit_salad', max: 4 },
  { key: 'chocolate', max: 4 },
  { key: 'chocolate_cake', max: 4 },
  { key: 'french_fries', max: 4 },
  { key: 'lemon_pie', max: 4 },
  { key: 'omelette', max: 4 },
  { key: 'spaghetti', max: 4 },
  { key: 'strawberry_cake', max: 4 },
  { key: 'garlic_bread', max: 4 },
  { key: 'popcorn', max: 4 },
  { key: 'salad', max: 4 },
  { key: 'taco', max: 4 },

  // T2+ Potions
  { key: 'healingpotion', max: 2 },
  { key: 'defensepotion', max: 2 },
  { key: 'attackpotion', max: 2 },
  { key: 'crit_chance_potion', max: 2 },
  { key: 'greater_healing_potion', max: 1 },
  { key: 'greater_defense_potion', max: 1 },
  { key: 'greater_attack_potion', max: 1 },
  { key: 'greater_crit_chance_potion', max: 1 },

  // T2+ Rings
  { key: 'silver_loop', max: 1 },
  { key: 'gold_band', max: 1 },
  { key: 'gilded_square', max: 1 },
  { key: 'steel_ring', max: 1 },
  { key: 'crimson_zigzag', max: 1 },
  { key: 'azure_band', max: 1 },
  { key: 'golden_vine', max: 1 },
  { key: 'flame_ring', max: 1 },
  { key: 'bone_ring', max: 1 },
  { key: 'emerald_band', max: 1 },
  { key: 'sunburst_ring', max: 1 },
  { key: 'natures_call', max: 1 },
  { key: 'crescent_ring', max: 1 },
  { key: 'shadow_band', max: 1 },
  { key: 'ruby_circle', max: 1 },
  { key: 'tidal_ring', max: 1 },
  { key: 'earth_guard', max: 1 },
  { key: 'molten_band', max: 1 },
  { key: 'blood_stone', max: 1 },
  { key: 'skull_ring', max: 1 },
  { key: 'fire_shard_ring', max: 1 },
  { key: 'silver_serpent', max: 1 },
  { key: 'ember_ring', max: 1 },
  { key: 'flame_guard', max: 1 },
  { key: 'crimson_shard', max: 1 },
  { key: 'ocean_ring', max: 1 },
  { key: 'golden_eye', max: 1 },
  { key: 'sunset_band', max: 1 },
  { key: 'frost_ring', max: 1 },
  { key: 'ice_crown', max: 1 },
  { key: 'sapphire_loop', max: 1 },
  { key: 'azure_guard', max: 1 },
  { key: 'golden_sigil', max: 1 },
  { key: 'frost_band', max: 1 },
  { key: 'crimson_arrow', max: 1 },
  { key: 'ice_shard', max: 1 },
  { key: 'natures_eye', max: 1 },
  { key: 'diamond_weave', max: 1 },

  // T2+ Amulets
  { key: 'bone_crescent', max: 1 },
  { key: 'iron_spiral', max: 1 },
  { key: 'silver_charm', max: 1 },
  { key: 'steel_pendant', max: 1 },
  { key: 'golden_shield', max: 1 },
  { key: 'chain_link', max: 1 },
  { key: 'flame_wing', max: 1 },
  { key: 'tidal_charm', max: 1 },
  { key: 'nature_star', max: 1 },
  { key: 'fire_blade', max: 1 },
  { key: 'verdant_pendant', max: 1 },
  { key: 'solar_disk', max: 1 },
  { key: 'golden_dagger', max: 1 },
  { key: 'silver_cross', max: 1 },
  { key: 'amber_leaf', max: 1 },
  { key: 'emerald_eye', max: 1 },
  { key: 'dragon_wing', max: 1 },
  { key: 'lightning_bolt', max: 1 },
  { key: 'earth_crown', max: 1 },
  { key: 'crimson_disk', max: 1 },
  { key: 'fire_shard_amulet', max: 1 },
  { key: 'sun_medallion', max: 1 },
  { key: 'molten_drop', max: 1 },
  { key: 'bone_cross', max: 1 },
  { key: 'autumn_leaf', max: 1 },
  { key: 'ruby_orb', max: 1 },
  { key: 'flame_skull', max: 1 },
  { key: 'silver_star', max: 1 },
  { key: 'golden_bloom', max: 1 },
  { key: 'ember_disk', max: 1 },
  { key: 'frost_pendant', max: 1 },
  { key: 'moon_disk', max: 1 },
  { key: 'tidal_blade', max: 1 },
  { key: 'azure_cross', max: 1 },
  { key: 'ocean_orbs', max: 1 },
  { key: 'sapphire_square', max: 1 },
  { key: 'solar_flare', max: 1 },
  { key: 'ice_star', max: 1 },
  { key: 'nature_shield', max: 1 },
  { key: 'crimson_star', max: 1 },

  // Jams
  { key: 'apple_jam', max: 3 },
  { key: 'apricot_jam', max: 3 },
  { key: 'banana_jam', max: 3 },
  { key: 'blueberry_jam', max: 3 },
  { key: 'cherry_jam', max: 3 },
  { key: 'chili_pepper_jam', max: 3 },
  { key: 'dragonfruit_jam', max: 3 },
  { key: 'grape_jam', max: 3 },
  { key: 'kiwi_jam', max: 3 },
  { key: 'lemon_jam', max: 3 },
  { key: 'orange_jam', max: 3 },
  { key: 'papaya_jam', max: 3 },
  { key: 'pear_jam', max: 3 },
  { key: 'pineapple_jam', max: 3 },
  { key: 'pomegranate_jam', max: 3 },
  { key: 'raspberry_jam', max: 3 },
  { key: 'strawberry_jam', max: 3 },
];

export const rotatingResourcePool = [
  // T2+ Resources
  { key: 'iron_ore', max: 10 },
  { key: 'silver_ore', max: 8 },
  { key: 'gold_ore', max: 6 },
  { key: 'blue_ore', max: 6 },
  { key: 'red_ore', max: 6 },
  { key: 'oak_log', max: 10 },
  { key: 'pine_log', max: 8 },
  { key: 'redwood_log', max: 6 },
  { key: 'silverleaf_log', max: 4 },
  { key: 'eldritchwood_log', max: 2 },
  { key: 'penny_bun', max: 8 },
  { key: 'chanterelle', max: 6 },
  { key: 'morel', max: 4 },
  { key: 'parrot_waxcap', max: 3 },
  { key: 'pixies_parasol', max: 2 },
  { key: 'witchs_hat', max: 2 },
  { key: 'violet_webcap', max: 6 },
  { key: 'grapes', max: 10 },
  { key: 'spring_onion', max: 8 },
  { key: 'coconut', max: 6 },
  { key: 'banana', max: 8 },
  { key: 'pineapple', max: 6 },
  { key: 'apple', max: 8 },
  { key: 'apricot', max: 8 },
  { key: 'cherry', max: 8 },
  { key: 'chili_pepper', max: 8 },
  { key: 'dragon_fruit', max: 6 },
  { key: 'kiwi', max: 8 },
  { key: 'lemon', max: 8 },
  { key: 'orange', max: 8 },
  { key: 'papaya', max: 6 },
  { key: 'pear', max: 8 },
  { key: 'pomegranate', max: 6 },
  { key: 'raspberry', max: 8 },
  { key: 'strawberry', max: 8 },
  { key: 'blueberry', max: 8 },
  { key: 'watermelon', max: 6 },
  { key: 'oyster', max: 6 },
  { key: 'squirrel', max: 6 },
  { key: 'squirrel_meat', max: 6 },
  { key: 'squirrel_hide', max: 6 },
  { key: 'rabbit', max: 4 },
  { key: 'rabbit_hide', max: 4 },
  { key: 'moose', max: 3 },
  { key: 'moose_hide', max: 3 },
  { key: 'moose_sausage', max: 3 },
  { key: 'hog', max: 4 },
  { key: 'hog_leg', max: 4 },
  { key: 'hog_hide', max: 4 },
  { key: 'fox', max: 4 },
  { key: 'fox_hide', max: 4 },
  { key: 'fox_meat', max: 4 },
  { key: 'deer', max: 3 },
  { key: 'deer_hide', max: 3 },
  { key: 'deer_meat', max: 3 },
  { key: 'wolf', max: 2 },
  { key: 'wolf_hide', max: 2 },
  { key: 'wolf_meat', max: 2 },
  { key: 'bear', max: 1 },
  { key: 'bear_hide', max: 1 },
  { key: 'bear_meat', max: 1 },
  { key: 'scorpion_carp', max: 8 },
  { key: 'largemouth_bass', max: 8 },
  { key: 'shrimp', max: 8 },
  { key: 'peach_jellyfish', max: 6 },
  { key: 'stingray', max: 6 },
  { key: 'woodskip', max: 6 },
  { key: 'orb_octopus', max: 6 },
  { key: 'octopus', max: 6 },
  { key: 'shad', max: 6 },
  { key: 'albacore', max: 6 },
  { key: 'speckled_cycloptopus', max: 6 },
  { key: 'squid', max: 6 },
  { key: 'crab', max: 6 },
  { key: 'blue_crab', max: 6 },
  { key: 'eldritch_bass', max: 4 },
  { key: 'beige_snapper', max: 6 },
  { key: 'smallmouth_bass', max: 6 },
  { key: 'pike', max: 6 },
  { key: 'tiger_trout', max: 6 },
  { key: 'green_sunfish', max: 6 },
  { key: 'red_rainbowfish', max: 6 },
  { key: 'sea_snake', max: 6 },
  { key: 'lobster', max: 6 },
  { key: 'chub', max: 6 },
  { key: 'dwarf_goby', max: 6 },
  { key: 'swordfish', max: 4 },
  { key: 'rockfish', max: 6 },
  { key: 'pufferfish', max: 6 },
  { key: 'shoal', max: 4 },
  { key: 'grouper', max: 4 },
  { key: 'flying_fish', max: 4 },
  { key: 'half_shoal', max: 4 },
  { key: 'sardine', max: 8 },
  { key: 'chattahoochee_bass', max: 4 },
  { key: 'catfish', max: 8 },
  { key: 'red_drum', max: 8 },
  { key: 'lingcod', max: 2 },
  { key: 'carp', max: 8 },
  { key: 'starfish', max: 6 },
  { key: 'cheese_slice', max: 8 },
  { key: 'milk', max: 6 },
  { key: 'avocado', max: 6 },
  { key: 'broccoli', max: 8 },
  { key: 'corn', max: 8 },
  { key: 'eggplant', max: 8 },
  { key: 'garlic', max: 8 },
  { key: 'lettuce', max: 8 },
  { key: 'onion', max: 8 },
  { key: 'potato', max: 8 },
  { key: 'peas', max: 8 },
  { key: 'radish', max: 8 },
  { key: 'tomato', max: 8 },
  { key: 'yellow_pepper', max: 8 },
  { key: 'rice', max: 8 },
  { key: 'copper_bar', max: 6 },
  { key: 'iron_bar', max: 4 },
  { key: 'silver_bar', max: 3 },
  { key: 'gold_bar', max: 2 },
  { key: 'blue_bar', max: 2 },
  { key: 'red_bar', max: 2 },
  { key: 'crude_plank', max: 8 },
  { key: 'birch_plank', max: 6 },
  { key: 'oak_plank', max: 4 },
  { key: 'pine_plank', max: 3 },
  { key: 'redwood_plank', max: 2 },
  { key: 'silverleaf_plank', max: 1 },
  { key: 'eldritchwood_plank', max: 1 },
  { key: 'birch_handle', max: 4 },
  { key: 'oak_handle', max: 3 },
  { key: 'pine_handle', max: 2 },
  { key: 'redwood_handle', max: 1 },
  { key: 'silverleaf_handle', max: 1 },
  { key: 'eldritchwood_handle', max: 1 },
  { key: 'dustmote_crystal_raw', max: 4 },
  { key: 'embercore_ruby_raw', max: 3 },
  { key: 'moonwell_opal_raw', max: 2 },
  { key: 'goldleaf_peridot_raw', max: 2 },
  { key: 'tidecrest_sapphire_raw', max: 3 },
  { key: 'voidstone_raw', max: 1 },
  { key: 'dustmote_crystal', max: 2 },
  { key: 'embercore_ruby', max: 1 },
  { key: 'moonwell_opal', max: 1 },
  { key: 'goldleaf_peridot', max: 1 },
  { key: 'tidecrest_sapphire', max: 1 },
  { key: 'voidstone', max: 1 },
];

export const ROTATING_ITEM_COUNT = 4; // How many items to pick each day
export const ROTATING_RESOURCE_COUNT = 4; // How many resources to pick each day

export const MARKUP_RATE = 0.5;

export function getBuyPrice(basePrice: number | undefined, repLevel: number) {
  if (!basePrice) {
    return 1;
  }

  const reputationCorrection = 1 - 0.005 * repLevel;
  const price = Math.floor(Math.max(3, basePrice * (1 + MARKUP_RATE * reputationCorrection)));

  return price;
}

export function getSellPrice(basePrice: number | undefined, repLevel: number) {
  if (!basePrice) {
    return 1;
  }

  const reputationCorrection = 1 - 0.005 * repLevel;
  const price = Math.ceil(Math.max(1, basePrice * (1 - MARKUP_RATE * reputationCorrection)));

  return price;
}
